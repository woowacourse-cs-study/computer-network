# TCP 흐름제어, 혼잡제어

udp는 흐름제어, 혼잡제어를 안한다.

## 흐름제어

송신자가 패킷을 보내는 속도에 비해 수신자가 패킷을 받아드리는 속도가 느릴때 송신자의 패킷 전송 속도를 조절해야한다. 이를 흐름 제어라고 한다.

## 혼잡제어

네트워크가 혼잡도에 따라 송신자의 패킷 전송 속도를 조절한다.

네트워크가 혼잡해지면, 송신자의 윈도우 크기를 줄인다.

혼잡 제어 방법은 AIMD, Slow Start 2가지가 있다. 

### AIMD

- 패킷 1개 전송을 완료할때마다 윈도우 크기를 하나씩 늘린다.
- 패킷 전송 실패가 발생하면 윈도우 크기를 절반으로 만든다.

### Slow Start

- 패킷 1개 전송을 완료할때마다 윈도우 크기를 두배씩 늘린다.
- 윈도우 크기가 os가 설정한 임계값보다 커지면, 윈도우크기를 1개씩 늘린다.
- 그러다가 패킷 손실이 발생하면 임계값을 윈도우의 절반으로 만든다.

# ARQ

go back n : 잘못된 패킷부터 n개 만큼 패킷들을 보낸다. (패킷 전송이 중복될 수 있음)

selective reate : 잘못된 패킷만 다시 보낸다. (구현하기 복잡함)

# 슬라이딩 윈도우

패킷을 전송할때 1개씩 전송하고 응답받는 stop and wait 방식은 느리다.

그래서 매 패킷 전송 확인 응답을 받지 않고, 여러개의 패킷을 연속으로 전송하는 방법이 있다.

윈도우 사이즈를 정해놓고 그 사이즈만큼 연속으로 패킷을 보낸다.패킷에 대한 확인 응답을 받으면 윈도우가 한칸씩 밀려서 슬라이딩 윈도우다.

3way 핸드셰이크일떄 윈도우 사이즈가 정해진다. 네트워크 상황에따라 윈도우 사이즈가 달라진다.

# TCP fast retransmit

송신자가 패킷을 여러개 송신했는데, 특정 패킷이 연속으로 도착하지 않았다는 것을 수신자로부터 ACK를 통해 3번 알림 받으면, 타임아웃에 상관없이 해당 패킷을 재전송한다. (원래는 타임아웃이후에 패킷을 전송함)